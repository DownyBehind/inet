#
# Copyright (C) 2025 INET Framework
#
# SPDX-License-Identifier: LGPL-3.0-or-later
#

[General]
# Network configuration
network = inet.linklayer.plc.PLCNetwork
sim-time-limit = 10s
warmup-period = 1s

# Random number generators
seed-set = ${repetition}
num-rngs = 3

# Simulation output
output-scalar-file = ${resultdir}/${configname}-${repetition}.sca
output-vector-file = ${resultdir}/${configname}-${repetition}.vec
result-dir = results

# Logging configuration
cmdenv-express-mode = true
cmdenv-autoflush = true
**.cmdenv-log-level = info

# GUI configuration (if using graphical mode)
**.hasVisualizer = false

[Config PLCBasic]
description = "Basic IEEE 1901 PLC Network with 5 nodes"
extends = General

# Network topology
PLCNetwork.numNodes = 5

# Channel parameters - SNR configuration as requested
**.plcChannel.snr = 20dB

# IEEE 1901 MAC parameters as requested
**.node[*].plcInterface.mac.maxBPC = 4
**.node[*].plcInterface.mac.cwMin = 7  # initialCW
**.node[*].plcInterface.mac.usePriorityResolution = true

# PHY layer parameters
**.node[*].plcInterface.phy.dataRate = 10Mbps
**.node[*].plcInterface.phy.enableBER = true
**.node[*].plcInterface.phy.baseSNR = 20dB
**.node[*].plcInterface.phy.transmitPower = 15dBm
**.node[*].plcInterface.phy.noisePower = -85dBm
**.node[*].plcInterface.phy.channelAttenuation = 15dB

# Traffic generation - 1500-byte frames at 1 Mbps per node
**.node[*].frameSize = 1500B
**.node[*].trafficRate = 1Mbps
**.node[*].trafficGen.startTime = uniform(0s, 0.5s)
**.node[*].trafficGen.stopTime = 10s

# Different priorities for nodes to test priority resolution
**.node[0].plcInterface.defaultPriority = 3  # CA3 - highest priority
**.node[1].plcInterface.defaultPriority = 2  # CA2
**.node[2].plcInterface.defaultPriority = 1  # CA1
**.node[3].plcInterface.defaultPriority = 0  # CA0 - lowest priority
**.node[4].plcInterface.defaultPriority = 2  # CA2

# Statistics collection - Throughput per node
**.node[*].plcInterface.**.statistic-recording = true
**.node[*].trafficGen.**.statistic-recording = true

# Detailed logging for throughput, delay, and collisions as requested
**.node[*].plcInterface.mac.framesSent.statistic-recording = true
**.node[*].plcInterface.mac.framesReceived.statistic-recording = true
**.node[*].plcInterface.mac.framesDropped.statistic-recording = true
**.node[*].plcInterface.mac.collisions.statistic-recording = true
**.node[*].plcInterface.mac.backoffs.statistic-recording = true

# PHY layer statistics
**.node[*].plcInterface.phy.framesSent.statistic-recording = true
**.node[*].plcInterface.phy.framesReceived.statistic-recording = true
**.node[*].plcInterface.phy.framesDroppedBER.statistic-recording = true
**.node[*].plcInterface.phy.ber.statistic-recording = true
**.node[*].plcInterface.phy.snr.statistic-recording = true

# Application statistics for delay measurement
**.node[*].trafficGen.**.statistic-recording = true

# Channel statistics for collision count
**.plcChannel.**.statistic-recording = true

[Config PLCHighLoad]
description = "High load scenario with increased traffic"
extends = PLCBasic

# Increase traffic rate to 2 Mbps per node
**.node[*].trafficRate = 2Mbps

[Config PLCVaryingSNR]
description = "Varying SNR conditions"
extends = PLCBasic

# Different SNR conditions for different nodes
**.node[0].plcInterface.phy.baseSNR = 25dB  # Good conditions
**.node[1].plcInterface.phy.baseSNR = 20dB  # Normal conditions
**.node[2].plcInterface.phy.baseSNR = 15dB  # Poor conditions
**.node[3].plcInterface.phy.baseSNR = 20dB  # Normal conditions
**.node[4].plcInterface.phy.baseSNR = 22dB  # Good conditions

[Config PLCNoPriorityResolution]
description = "Disable priority resolution to compare performance"
extends = PLCBasic

# Disable priority resolution
**.node[*].plcInterface.usePriorityResolution = false

[Config PLCParameterSweep]
description = "Parameter sweep for BPC and CW values"
extends = PLCBasic

# Sweep BPC values
**.node[*].plcInterface.maxBPC = ${bpc=2,4,6,8}

# Sweep initial contention window
**.node[*].plcInterface.cwMin = ${cw=7,15,31,63}

[Config PLCAnalysis]
description = "Detailed analysis configuration with comprehensive logging"
extends = PLCBasic

# Enable detailed vector recording for analysis
**.vector-recording = true
**.scalar-recording = true

# Record detailed timing information
**.node[*].plcInterface.**.record-interval = 0.1s

# Enable histogram recording
**.*.statistic-recording = true

# Output file naming for analysis
output-scalar-file = ${resultdir}/analysis-${configname}-${bpc}-${cw}-${repetition}.sca
output-vector-file = ${resultdir}/analysis-${configname}-${bpc}-${cw}-${repetition}.vec

# Performance analysis parameters
repeat = 10

[Config PLCDebug]
description = "Debug configuration with detailed logging"
extends = PLCBasic

# Enable detailed logging for debugging
**.cmdenv-log-level = debug
**.plcInterface.**.cmdenv-log-level = trace

# Shorter simulation for debugging
sim-time-limit = 2s

# Reduce traffic for easier debugging
**.node[*].trafficRate = 0.2Mbps
